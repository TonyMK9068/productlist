- content_for :head do 
  = stylesheet_link_tag 'searches'

.container
  .row
    - @amazon_response["ItemSearchResponse"]["Items"]["Item"].each do |result|
      .col-sm-4.thumbnail-box
        .thumbnail
          .row
            .thumbnail-image-container.col-md-6
              - if defined?(result['MediumImage']['URL'])
                - ad_image = result['MediumImage']['URL']
                = image_tag(ad_image, class: "thumbnail-image")
              - else
                - ad_image = "none"
            .thumbnail-basic-info.col-md-5
              %p Category: #{category = result['ItemAttributes']['ProductGroup']}
              %p ASIN: #{asin = result['ASIN']}
              - price = defined?(result['ItemAttributes']['ListPrice']['FormattedPrice']) ? result['ItemAttributes']['ListPrice']['FormattedPrice'] : "N/A"
              %p Price: #{price}
          .amazon.caption
            .panel.panel-default
              .panel-heading
                %h3.panel-title= name = result['ItemAttributes']['Title']
              .panel-body
                .row
                  .col-md-6
                    %p Store: #{store = 'Amazon.com'} 
                    %p
                      %small
                        - link = result['DetailPageURL']
                        = link_to 'See More Info', link, :target => "_blank"
                  .col-md-5
                    %button.btn.btn-primary.btn-sm{:data => {:toggle => "modal", :target => "##{asin}"} } List it! <i class='glyphicon glyphicon-star'></i>
                    = render partial: 'products/product_form', locals: { name: name, product_number: asin, link: link, image: ad_image, category: category, price: price, store: store }

    - @etsy_response['results'].each do |item|
      .col-sm-4.thumbnail-box
        .thumbnail
          .thumbnail-image-container
            - etsy_image = (item['Images'][0]['url_170x135'])
            = image_tag(etsy_image, class: "thumbnail-image")

          .caption
            .panel.panel-default
              .panel-heading
                %h3.panel-title= (etsy_listing_title = item['title'])
              .panel-body
                = "Listing Number: " + (product_number = item['listing_id'].to_s)
                - etsy_price = item['price']
                = "Price: " + ("$" + item['price'])
                = "Category: " + (etsy_category = item['category_path'][0])
              .panel-footer
                - etsy_link = item['url']
                %small #{store = 'Etsy.com'}: #{ link_to 'See More Info', etsy_link, :target => "_blank" }
                %button.btn.btn-primary.btn-sm{:data => {:toggle => "modal", :target => "##{product_number}"} } List it! <i class='glyphicon glyphicon-star'></i>
                = render partial: 'products/product_form', locals: { name: etsy_listing_title, product_number: product_number, link: etsy_link, category: etsy_category, price: etsy_price, store: store, image: etsy_image }


.row
  .results_nav.col-md-6.col-md-offset-3
    - if @page > 1
      .col-md-6
        %h2= link_to 'Previous Page', list_searches_path(list_id: @list.id, page: (@page - 1), value: @keyword), method: :post
    .col-md-6
      %h2= link_to 'Next Page', list_searches_path(list_id: @list.id, page: (@page + 1), value: @keyword), method: :post
